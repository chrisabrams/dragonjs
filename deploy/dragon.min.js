var Dragon=Dragon||{};Dragon.Version="0.0.1",typeof window=="undefined"&&(exports=module.exports=Dragon),Dragon.Class=function(a){var b=a.constructor||function(){},c=a.extend||!1;try{this.extend(c)}catch(d){console.log(d.message)}},Dragon.Class.prototype.getParentClass=function(a){var b=window[a]||!1;if(b=="undefined"||typeof b!="function")throw{name:"ClassNonexistent",message:"The class "+a+" does not exist"}},Dragon.Class.prototype.getParentClassConstructor=function(a){var b=window[a]||!1;if(b=="undefined"||typeof b!="function")throw{name:"ClassNonexistent",message:"The class "+a+" does not exist"};return this.prototype.constructor=b.prototype.constructor},Dragon.View=function(a,b){var c=this;c.callback=b||!1,a.el&&(c.el=document.getElementById(a.el)),a.events&&(c.events=a.events);if(a.height)switch(a.height){case"window":c.height=window.innerHeight,c.el.style.height=c.height+"px";break;default:typeof a.height=="number"&&(c.height=a.height,c.el.style.height=c.height+"px")}else c.height=c.el.offsetHeight;a.init&&(c.init=a.init),a.parent&&(c.parent=a.parent),a.template?c.template=a.template:c.template==0,c.type=a.type||!1,c.type&&c.setType(c.type);if(a.width)switch(a.width){case"window":c.width=window.innerWidth,c.el.style.width=c.width+"px";break;default:typeof a.width=="number"&&(c.width=a.width,c.el.style.width=c.width+"px")}else c.width=c.el.offsetWidth;c.init(),typeof c.template=="object"&&c.renderTemplate(c.template)},Dragon.View.prototype.events={},Dragon.View.prototype.delegateEvents=function(){var a=this.events;a!=null&&a.foreach(function(a,b){var c=a.toString();switch(c){case this.startsWith("#"):b=="click"&&console.log("OK we're getting somewhere");break;case this.startsWith("."):break;case this.starsWith("["):}})},Dragon.View.prototype.init=function(){},Dragon.View.prototype.parent=!1,Dragon.View.prototype.renderTemplate=function(a){var b=this;if(a.source&&window.XMLHttpRequest){var c=new XMLHttpRequest;c.onreadystatechange=function(){if(c.readyState==4&&c.status==200){var d=document.createElement("div");d.innerHTML=c.responseText;var e=d.getElementsByTagName("script");_.find(e,function(c,d){if(c.id==a.id){var e;a.data?e=a.data:e={},html=_.template(c.innerHTML,e),b.el.innerHTML=html,b.callback();return}})}},c.open("GET",a.source,!0),c.send()}},Dragon.View.prototype.setType=function(a){var b=this;if(typeof a=="string")switch(a){case"nav":var c=b.el.getElementsByTagName("nav"),d=c[0].getElementsByTagName("a"),e=d.length;for(var f=0;f<e;f++)d[f].onclick=function(a){this.removeClass("nav-selected"),a.target&&this.addClass("nav-selected")}}},Array.prototype.remove=function(a,b){var c=this.slice((b||a)+1||this.length);return this.length=a<0?this.length+a:a,this.push.apply(this,c)},Element.prototype.hasClass=function(a){return this.className.match(new RegExp("(\\s|^)"+a+"(\\s|$)"))},Element.prototype.addClass=function(a){var b=this;b.hasClass(a)||(b.className+=" "+a)},Element.prototype.removeClass=function(a){var b=this;if(b.hasClass){var c=new RegExp("(\\s|^)"+a+"(\\s|$)");b.className=b.className.replace(c," ")}},Element.prototype.replaceClass=function(a,b){var c=this;c.hasClass(a)&&(c.removeClass(a),c.addClass(b));return},Element.prototype.toggleClass=function(a){var b=this;b.hasClass(a)?b.removeClass(a):b.addClass(a);return},Object.prototype.foreach=function(a){var b=this;for(var c in b){var d=b[c];b.hasOwnProperty(c)&&a(c,d)}},String.prototype.startsWith=function(a){return a===this.substr(0,a.length)}